version: '3'
services:

    evie-client:
        build:
            context: ./client
            args:
                FA_TOKEN: ${EVIE_FA_TOKEN}
        container_name: evie-client
        env_file:
            - .env
        ports:
            - "${EVIE_CLIENT_PORT:-80}:80"
        depends_on:
            - evie-server

    evie-server:
        build: ./server
        container_name: evie-server
        env_file:
            - .env
        ports:
            - "${EVIE_SERVER_PORT:-3000}:3000"
        volumes:
            - ${EVIE_CONFIG_VOLUME:-config-volume}:/app/config
            - ${EVIE_DATA_VOLUME:-data-volume}:/app/data
            - ${EVIE_LOG_VOLUME:-log-volume}:/app/logs

volumes:
    config-volume:
    data-volume:
    log-volume:
